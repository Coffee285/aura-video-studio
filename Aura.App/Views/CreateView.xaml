<Page
    x:Class="Aura.App.Views.CreateView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Aura.App.Views"
    xmlns:viewmodels="using:Aura.App.ViewModels"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <ScrollViewer>
        <StackPanel Padding="24" MaxWidth="1200" Spacing="24">
            
            <!-- Header -->
            <TextBlock 
                Text="Create New Video" 
                Style="{ThemeResource TitleTextBlockStyle}"
                Margin="0,0,0,12"/>
            
            <!-- Step 1: Brief -->
            <Expander Header="Step 1: Brief" IsExpanded="True">
                <StackPanel Spacing="12" Padding="12">
                    <TextBox 
                        Header="Topic (Required)"
                        PlaceholderText="Enter video topic..."
                        Text="{x:Bind ViewModel.Topic, Mode=TwoWay}"
                        MaxLength="200"/>
                    
                    <TextBox 
                        Header="Audience (Optional)"
                        PlaceholderText="Target audience..."
                        Text="{x:Bind ViewModel.Audience, Mode=TwoWay}"/>
                    
                    <TextBox 
                        Header="Goal (Optional)"
                        PlaceholderText="What should viewers learn or do?"
                        Text="{x:Bind ViewModel.Goal, Mode=TwoWay}"/>
                    
                    <ComboBox 
                        Header="Tone"
                        SelectedItem="{x:Bind ViewModel.Tone, Mode=TwoWay}"
                        Width="300"
                        HorizontalAlignment="Left">
                        <x:String>Informative</x:String>
                        <x:String>Casual</x:String>
                        <x:String>Professional</x:String>
                        <x:String>Entertaining</x:String>
                        <x:String>Educational</x:String>
                    </ComboBox>
                    
                    <ComboBox 
                        Header="Aspect Ratio"
                        Width="300"
                        HorizontalAlignment="Left"
                        SelectedIndex="0">
                        <ComboBoxItem Content="16:9 Widescreen" Tag="Widescreen16x9"/>
                        <ComboBoxItem Content="9:16 Vertical (Shorts)" Tag="Vertical9x16"/>
                        <ComboBoxItem Content="1:1 Square" Tag="Square1x1"/>
                    </ComboBox>
                    
                    <ComboBox 
                        Header="Language"
                        SelectedItem="{x:Bind ViewModel.Language, Mode=TwoWay}"
                        Width="300"
                        HorizontalAlignment="Left">
                        <x:String>en-US</x:String>
                        <x:String>en-GB</x:String>
                        <x:String>es-ES</x:String>
                        <x:String>fr-FR</x:String>
                        <x:String>de-DE</x:String>
                    </ComboBox>
                </StackPanel>
            </Expander>
            
            <!-- Step 2: Length and Pacing -->
            <Expander Header="Step 2: Length and Pacing" IsExpanded="True">
                <StackPanel Spacing="12" Padding="12">
                    <StackPanel Spacing="4">
                        <TextBlock Text="{x:Bind ViewModel.DurationMinutes, Mode=OneWay, Converter={StaticResource StringFormatConverter}, ConverterParameter='Duration: {0} minutes'}"/>
                        <Slider 
                            Minimum="1" 
                            Maximum="20" 
                            Value="{x:Bind ViewModel.DurationMinutes, Mode=TwoWay}"
                            StepFrequency="1"
                            TickFrequency="1"
                            TickPlacement="BottomRight"/>
                    </StackPanel>
                    
                    <ComboBox 
                        Header="Pacing"
                        Width="300"
                        HorizontalAlignment="Left"
                        SelectedIndex="1">
                        <ComboBoxItem Content="Chill" Tag="Chill"/>
                        <ComboBoxItem Content="Conversational" Tag="Conversational"/>
                        <ComboBoxItem Content="Fast" Tag="Fast"/>
                    </ComboBox>
                    
                    <ComboBox 
                        Header="Content Density"
                        Width="300"
                        HorizontalAlignment="Left"
                        SelectedIndex="1">
                        <ComboBoxItem Content="Minimal" Tag="Minimal"/>
                        <ComboBoxItem Content="Balanced" Tag="Balanced"/>
                        <ComboBoxItem Content="Dense" Tag="Dense"/>
                    </ComboBox>
                    
                    <TextBox 
                        Header="Style"
                        Text="{x:Bind ViewModel.Style, Mode=TwoWay}"
                        PlaceholderText="Educational, Tutorial, Review, etc."/>
                </StackPanel>
            </Expander>
            
            <!-- Step 3: Voice -->
            <Expander Header="Step 3: Voice and Narration" IsExpanded="True">
                <StackPanel Spacing="12" Padding="12">
                    <ComboBox 
                        Header="Voice"
                        SelectedItem="{x:Bind ViewModel.VoiceName, Mode=TwoWay}"
                        Width="400"
                        HorizontalAlignment="Left">
                        <x:String>Microsoft David Desktop</x:String>
                        <x:String>Microsoft Zira Desktop</x:String>
                        <x:String>Microsoft Mark</x:String>
                    </ComboBox>
                    
                    <StackPanel Spacing="4">
                        <TextBlock Text="{x:Bind ViewModel.VoiceRate, Mode=OneWay, Converter={StaticResource StringFormatConverter}, ConverterParameter='Speech Rate: {0:F1}x'}"/>
                        <Slider 
                            Minimum="0.5" 
                            Maximum="2.0" 
                            Value="{x:Bind ViewModel.VoiceRate, Mode=TwoWay}"
                            StepFrequency="0.1"
                            TickFrequency="0.25"
                            TickPlacement="BottomRight"/>
                    </StackPanel>
                    
                    <StackPanel Spacing="4">
                        <TextBlock Text="{x:Bind ViewModel.VoicePitch, Mode=OneWay, Converter={StaticResource StringFormatConverter}, ConverterParameter='Pitch: {0:F1}'}"/>
                        <Slider 
                            Minimum="-10" 
                            Maximum="10" 
                            Value="{x:Bind ViewModel.VoicePitch, Mode=TwoWay}"
                            StepFrequency="1"
                            TickFrequency="5"
                            TickPlacement="BottomRight"/>
                    </StackPanel>
                    
                    <ComboBox 
                        Header="Pause Style"
                        Width="300"
                        HorizontalAlignment="Left"
                        SelectedIndex="1">
                        <ComboBoxItem Content="Short" Tag="Short"/>
                        <ComboBoxItem Content="Natural" Tag="Natural"/>
                        <ComboBoxItem Content="Long" Tag="Long"/>
                    </ComboBox>
                </StackPanel>
            </Expander>
            
            <!-- Progress and Actions -->
            <StackPanel Spacing="12">
                <ProgressBar 
                    Value="{x:Bind ViewModel.ProgressPercentage, Mode=OneWay}"
                    Visibility="{x:Bind ViewModel.IsGenerating, Mode=OneWay}"
                    ShowError="False"
                    ShowPaused="False"/>
                
                <TextBlock 
                    Text="{x:Bind ViewModel.StatusMessage, Mode=OneWay}"
                    Foreground="{ThemeResource SystemControlForegroundBaseMediumBrush}"/>
                
                <StackPanel Orientation="Horizontal" Spacing="12">
                    <Button 
                        Content="Generate Video" 
                        Command="{x:Bind ViewModel.GenerateVideoCommand}"
                        IsEnabled="{x:Bind ViewModel.IsGenerating, Mode=OneWay, Converter={StaticResource BoolNegationConverter}}"
                        Style="{ThemeResource AccentButtonStyle}"/>
                    
                    <Button 
                        Content="Reset Form" 
                        Command="{x:Bind ViewModel.ResetFormCommand}"
                        IsEnabled="{x:Bind ViewModel.IsGenerating, Mode=OneWay, Converter={StaticResource BoolNegationConverter}}"/>
                </StackPanel>
            </StackPanel>
            
            <!-- Info Card -->
            <InfoBar
                Title="Free Mode Active"
                Message="Using rule-based script generation and Windows TTS. Add API keys in Settings for Pro features."
                IsOpen="True"
                Severity="Informational"
                IsClosable="False"/>
        </StackPanel>
    </ScrollViewer>
</Page>

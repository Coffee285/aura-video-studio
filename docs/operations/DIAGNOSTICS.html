<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Diagnostics Bundle and Failure Analysis Guide | Aura Video Studio </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Diagnostics Bundle and Failure Analysis Guide | Aura Video Studio ">
      
      
      <link rel="icon" href="../../favicon.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.html">
      <meta name="docfx:tocrel" content="../../toc.html">
      
      <meta name="docfx:rel" content="../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/Coffee285/aura-video-studio/blob/main/docs/operations/DIAGNOSTICS.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../logo.svg" alt="Aura Video Studio">
            Aura Video Studio
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">

      <div class="content">
        <div class="actionbar">

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="diagnostics-bundle-and-failure-analysis-guide">Diagnostics Bundle and Failure Analysis Guide</h1>

<h2 id="overview">Overview</h2>
<p>Aura Video Studio includes powerful diagnostic tools to help troubleshoot failed jobs quickly and efficiently. The diagnostics system provides:</p>
<ol>
<li><strong>Diagnostic Bundles</strong>: One-click download of comprehensive diagnostic data with automatic redaction of sensitive information</li>
<li><strong>Failure Analysis</strong>: AI-powered root cause analysis with actionable recommendations</li>
</ol>
<h2 id="features">Features</h2>
<h3 id="diagnostic-bundles">Diagnostic Bundles</h3>
<p>Diagnostic bundles are ZIP archives containing everything needed to diagnose a job failure:</p>
<p><strong>Contents:</strong></p>
<ul>
<li><strong>manifest.json</strong>: Complete metadata about the job and bundle</li>
<li><strong>system-info.json</strong>: System and hardware information</li>
<li><strong>timeline.json</strong>: Job execution timeline with stage durations and correlation IDs</li>
<li><strong>logs-redacted.txt</strong>: Anonymized application logs (API keys and credentials redacted)</li>
<li><strong>model-decisions.json</strong>: AI model selection decisions (if applicable)</li>
<li><strong>ffmpeg-commands.json</strong>: FFmpeg commands executed (if applicable)</li>
<li><strong>cost-report.json</strong>: Cost breakdown by stage and provider (if applicable)</li>
<li><strong>README.txt</strong>: Human-readable overview of bundle contents</li>
</ul>
<p><strong>Privacy:</strong>
All diagnostic bundles are automatically redacted to remove:</p>
<ul>
<li>API keys and authentication tokens</li>
<li>Passwords and credentials</li>
<li>Personal identifying information</li>
<li>Machine names are anonymized</li>
</ul>
<p>Bundles are safe to share for troubleshooting purposes.</p>
<h3 id="failure-analysis">Failure Analysis</h3>
<p>The AI-powered failure analysis system examines error messages, logs, and job telemetry to:</p>
<ol>
<li>Identify the primary root cause with confidence score</li>
<li>List secondary possible causes</li>
<li>Provide prioritized recommended actions with step-by-step instructions</li>
<li>Link to relevant documentation</li>
<li>Estimate time to resolve</li>
</ol>
<p><strong>Supported Root Cause Types:</strong></p>
<ul>
<li><strong>RateLimit</strong>: API rate limit exceeded</li>
<li><strong>InvalidApiKey</strong>: Invalid or expired API key</li>
<li><strong>MissingApiKey</strong>: No API key configured</li>
<li><strong>NetworkError</strong>: Network connectivity issues</li>
<li><strong>MissingCodec</strong>: Required video codec not available</li>
<li><strong>FFmpegNotFound</strong>: FFmpeg not found or not configured</li>
<li><strong>InsufficientResources</strong>: Not enough memory, disk space, or other resources</li>
<li><strong>InvalidInput</strong>: Invalid configuration or request data</li>
<li><strong>ProviderUnavailable</strong>: Provider service temporarily down</li>
<li><strong>Timeout</strong>: Operation timeout</li>
<li><strong>BudgetExceeded</strong>: Budget or quota exceeded</li>
<li><strong>FileSystemError</strong>: File permissions or disk space issues</li>
<li><strong>Unknown</strong>: Unclassified errors</li>
</ul>
<h2 id="usage">Usage</h2>
<h3 id="from-the-ui">From the UI</h3>
<h4 id="download-diagnostic-bundle">Download Diagnostic Bundle</h4>
<ol>
<li>Navigate to a failed job</li>
<li>Click the &quot;Diagnostics&quot; tab or button</li>
<li>Click &quot;Download Diagnostics&quot;</li>
<li>The bundle is generated and downloaded automatically</li>
<li>Extract the ZIP file to view contents</li>
</ol>
<p><strong>Bundle Expiration:</strong>
Bundles expire after 24 hours and are automatically cleaned up.</p>
<h4 id="analyze-failure">Analyze Failure</h4>
<ol>
<li>Navigate to a failed job</li>
<li>Click the &quot;Diagnostics&quot; tab or button</li>
<li>Click &quot;Analyze Failure&quot;</li>
<li>Review the root cause analysis</li>
<li>Follow recommended actions in priority order</li>
</ol>
<h3 id="from-the-api">From the API</h3>
<h4 id="generate-diagnostic-bundle">Generate Diagnostic Bundle</h4>
<pre><code class="lang-bash">POST /api/diagnostics/bundle/{jobId}
</code></pre>
<p><strong>Response:</strong></p>
<pre><code class="lang-json">{
  &quot;bundleId&quot;: &quot;abc123...&quot;,
  &quot;jobId&quot;: &quot;job-456&quot;,
  &quot;fileName&quot;: &quot;diagnostic-bundle-job-456-2025-11-05-140000.zip&quot;,
  &quot;createdAt&quot;: &quot;2025-11-05T14:00:00Z&quot;,
  &quot;expiresAt&quot;: &quot;2025-11-06T14:00:00Z&quot;,
  &quot;sizeBytes&quot;: 123456,
  &quot;downloadUrl&quot;: &quot;/api/diagnostics/bundle/abc123.../download&quot;
}
</code></pre>
<h4 id="download-bundle">Download Bundle</h4>
<pre><code class="lang-bash">GET /api/diagnostics/bundle/{bundleId}/download
</code></pre>
<p>Returns the ZIP file as application/zip.</p>
<h4 id="explain-failure">Explain Failure</h4>
<pre><code class="lang-bash">POST /api/diagnostics/explain-failure
Content-Type: application/json

{
  &quot;jobId&quot;: &quot;job-456&quot;,
  &quot;stage&quot;: &quot;TTS&quot;,
  &quot;errorMessage&quot;: &quot;Rate limit exceeded&quot;,
  &quot;errorCode&quot;: &quot;E429&quot;
}
</code></pre>
<p><strong>Response:</strong></p>
<pre><code class="lang-json">{
  &quot;jobId&quot;: &quot;job-456&quot;,
  &quot;analyzedAt&quot;: &quot;2025-11-05T14:00:00Z&quot;,
  &quot;summary&quot;: &quot;Job job-456 failed during the TTS stage. API rate limit exceeded...&quot;,
  &quot;primaryRootCause&quot;: {
    &quot;type&quot;: &quot;RateLimit&quot;,
    &quot;description&quot;: &quot;API rate limit exceeded - Too many requests sent to the provider in a short time&quot;,
    &quot;confidence&quot;: 90,
    &quot;evidence&quot;: [&quot;Rate limit exceeded&quot;],
    &quot;stage&quot;: &quot;TTS&quot;,
    &quot;provider&quot;: &quot;ElevenLabs&quot;
  },
  &quot;secondaryRootCauses&quot;: [],
  &quot;recommendedActions&quot;: [
    {
      &quot;priority&quot;: 1,
      &quot;title&quot;: &quot;Wait and Retry&quot;,
      &quot;description&quot;: &quot;Rate limits typically reset after a few minutes...&quot;,
      &quot;steps&quot;: [
        &quot;Wait 5-10 minutes before retrying&quot;,
        &quot;Check your provider dashboard for rate limit details&quot;
      ],
      &quot;canAutomate&quot;: false,
      &quot;estimatedMinutes&quot;: 10,
      &quot;type&quot;: &quot;WaitAndRetry&quot;
    }
  ],
  &quot;documentationLinks&quot;: [
    {
      &quot;title&quot;: &quot;Managing API Rate Limits&quot;,
      &quot;url&quot;: &quot;https://github.com/Coffee285/aura-video-studio/blob/main/docs/troubleshooting/Troubleshooting.md/rate-limits&quot;,
      &quot;description&quot;: &quot;Learn how to handle and avoid rate limit errors&quot;
    }
  ],
  &quot;confidenceScore&quot;: 90
}
</code></pre>
<h2 id="bundle-manifest-schema">Bundle Manifest Schema</h2>
<p>The bundle manifest follows a strict JSON schema for compatibility across versions.</p>
<p><strong>Schema Location:</strong> <code>diagnostics/BundleManifest.schema.json</code></p>
<p><strong>Schema Version:</strong> 1.0</p>
<p>Key sections:</p>
<ul>
<li><strong>job</strong>: Job information (ID, status, stage, timestamps, error details)</li>
<li><strong>systemProfile</strong>: Hardware and OS information</li>
<li><strong>timeline</strong>: Stage-by-stage execution timeline with durations and correlation IDs</li>
<li><strong>modelDecisions</strong>: AI model selection decisions</li>
<li><strong>ffmpegCommands</strong>: FFmpeg commands with exit codes and durations</li>
<li><strong>exportManifests</strong>: Export metadata</li>
<li><strong>costReport</strong>: Cost breakdown by stage and provider</li>
<li><strong>logs</strong>: Anonymized log entries</li>
<li><strong>files</strong>: List of files in the bundle</li>
</ul>
<h2 id="correlation-ids">Correlation IDs</h2>
<p>Every stage of job execution is assigned a unique correlation ID for tracking:</p>
<p><strong>Purpose:</strong></p>
<ul>
<li>Track requests across services</li>
<li>Correlate logs from different components</li>
<li>Debug distributed systems</li>
<li>Link telemetry data</li>
</ul>
<p><strong>Format:</strong> UUID v4 or custom identifier</p>
<p><strong>Locations:</strong></p>
<ul>
<li>HTTP headers: <code>X-Correlation-ID</code></li>
<li>Log entries: <code>CorrelationId</code> field</li>
<li>Timeline entries: <code>correlationId</code> field</li>
<li>Model decisions: <code>correlationId</code> field</li>
<li>FFmpeg commands: <code>correlationId</code> field</li>
</ul>
<p><strong>Best Practices:</strong></p>
<ul>
<li>Generate correlation ID at job creation</li>
<li>Pass through all service calls</li>
<li>Include in all log statements</li>
<li>Index correlation IDs for search</li>
</ul>
<h2 id="integration-with-sse">Integration with SSE</h2>
<p>Diagnostic events are available via Server-Sent Events (SSE) for real-time monitoring:</p>
<p><strong>SSE Endpoint:</strong> <code>/api/jobs/{jobId}/events</code></p>
<p><strong>Event Types:</strong></p>
<ul>
<li><code>job-status</code>: Job status changes (includes correlation ID)</li>
<li><code>step-progress</code>: Step progress updates (includes step name and correlation ID)</li>
<li><code>job-completed</code>: Job completed successfully</li>
<li><code>job-failed</code>: Job failed (includes error message and correlation ID)</li>
</ul>
<p><strong>Correlation IDs in SSE:</strong>
Each SSE event includes a correlation ID for tracking. Use this ID to:</p>
<ol>
<li>Filter logs for specific job stages</li>
<li>Correlate frontend events with backend logs</li>
<li>Debug SSE connection issues</li>
<li>Track end-to-end request flow</li>
</ol>
<p>For more details, see: <code>SSE_INTEGRATION_TESTING_GUIDE.md</code></p>
<h2 id="best-practices">Best Practices</h2>
<h3 id="when-to-download-bundles">When to Download Bundles</h3>
<p>Download diagnostic bundles when:</p>
<ul>
<li>A job fails unexpectedly</li>
<li>You need to share debugging information with support</li>
<li>You're troubleshooting a complex issue</li>
<li>You want to analyze performance patterns</li>
<li>You need cost analysis data</li>
</ul>
<h3 id="when-to-use-failure-analysis">When to Use Failure Analysis</h3>
<p>Use failure analysis when:</p>
<ul>
<li>You encounter an error for the first time</li>
<li>The error message is unclear</li>
<li>You're not sure what to do next</li>
<li>You want to understand the root cause</li>
<li>You need step-by-step remediation guidance</li>
</ul>
<h3 id="interpreting-confidence-scores">Interpreting Confidence Scores</h3>
<p>Confidence scores indicate how certain the analysis is about the root cause:</p>
<ul>
<li><strong>90-100%</strong>: Very high confidence - follow these recommendations first</li>
<li><strong>70-89%</strong>: High confidence - likely the correct cause</li>
<li><strong>50-69%</strong>: Medium confidence - possible cause, investigate further</li>
<li><strong>Below 50%</strong>: Low confidence - consider other possibilities</li>
</ul>
<p>Multiple root causes with similar confidence scores may indicate:</p>
<ul>
<li>Multiple contributing factors</li>
<li>Complex failure scenarios</li>
<li>Need for deeper investigation</li>
</ul>
<h3 id="privacy-and-security">Privacy and Security</h3>
<p><strong>What is Redacted:</strong></p>
<ul>
<li>API keys (patterns like <code>sk-...</code>, <code>Bearer ...</code>)</li>
<li>Password fields</li>
<li>Token fields</li>
<li>Personal information</li>
</ul>
<p><strong>What is NOT Redacted:</strong></p>
<ul>
<li>Job IDs and correlation IDs</li>
<li>Error messages (technical details)</li>
<li>System information (OS, hardware specs)</li>
<li>Timing and performance data</li>
<li>Provider names</li>
<li>Model names</li>
</ul>
<p><strong>Safe to Share:</strong>
Diagnostic bundles are designed to be safe to share with:</p>
<ul>
<li>Internal team members</li>
<li>Support staff</li>
<li>Community forums (if comfortable)</li>
</ul>
<p>Always review the bundle contents before sharing externally if you have concerns.</p>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="bundle-generation-fails">Bundle Generation Fails</h3>
<p>If bundle generation fails:</p>
<ol>
<li>Check disk space (need at least 100MB free)</li>
<li>Verify write permissions to application directory</li>
<li>Check logs for specific error messages</li>
<li>Try generating a bundle for a different job</li>
<li>Contact support if issue persists</li>
</ol>
<h3 id="failure-analysis-returns-unknown">Failure Analysis Returns &quot;Unknown&quot;</h3>
<p>If analysis returns &quot;Unknown&quot; root cause:</p>
<ol>
<li>Download the diagnostic bundle for more details</li>
<li>Review error messages in the bundle</li>
<li>Check FFmpeg command output if applicable</li>
<li>Review timeline for stuck stages</li>
<li>Submit the bundle to support for manual review</li>
</ol>
<h3 id="missing-data-in-bundle">Missing Data in Bundle</h3>
<p>If bundle is missing expected data:</p>
<ol>
<li>Verify the job actually reached that stage</li>
<li>Check if telemetry was enabled during the run</li>
<li>Review bundle manifest for included files</li>
<li>Regenerate the bundle if data is stale</li>
<li>Report missing data to support</li>
</ol>
<h2 id="api-reference">API Reference</h2>
<h3 id="post-apidiagnosticsbundlejobid">POST /api/diagnostics/bundle/{jobId}</h3>
<p>Generate a comprehensive diagnostic bundle for a specific job.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>jobId</code> (path): Job ID to generate bundle for</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>bundleId</code>: Unique bundle identifier</li>
<li><code>jobId</code>: Job ID</li>
<li><code>fileName</code>: Name of the generated file</li>
<li><code>createdAt</code>: When bundle was created</li>
<li><code>expiresAt</code>: When bundle expires</li>
<li><code>sizeBytes</code>: Size of bundle in bytes</li>
<li><code>downloadUrl</code>: URL to download the bundle</li>
</ul>
<p><strong>Status Codes:</strong></p>
<ul>
<li><code>200 OK</code>: Bundle generated successfully</li>
<li><code>400 Bad Request</code>: Invalid job ID</li>
<li><code>404 Not Found</code>: Job not found</li>
<li><code>500 Internal Server Error</code>: Bundle generation failed</li>
</ul>
<h3 id="get-apidiagnosticsbundlebundleiddownload">GET /api/diagnostics/bundle/{bundleId}/download</h3>
<p>Download a diagnostic bundle by ID.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>bundleId</code> (path): Bundle ID to download</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li>ZIP file (application/zip)</li>
</ul>
<p><strong>Status Codes:</strong></p>
<ul>
<li><code>200 OK</code>: Bundle downloaded successfully</li>
<li><code>404 Not Found</code>: Bundle not found or expired</li>
<li><code>500 Internal Server Error</code>: Download failed</li>
</ul>
<h3 id="post-apidiagnosticsexplain-failure">POST /api/diagnostics/explain-failure</h3>
<p>Analyze a job failure and provide recommendations.</p>
<p><strong>Request Body:</strong></p>
<pre><code class="lang-json">{
  &quot;jobId&quot;: &quot;string&quot;,
  &quot;stage&quot;: &quot;string (optional)&quot;,
  &quot;errorMessage&quot;: &quot;string (optional)&quot;,
  &quot;errorCode&quot;: &quot;string (optional)&quot;
}
</code></pre>
<p><strong>Returns:</strong></p>
<ul>
<li><code>jobId</code>: Job ID</li>
<li><code>analyzedAt</code>: When analysis was performed</li>
<li><code>summary</code>: Human-readable summary</li>
<li><code>primaryRootCause</code>: Primary identified cause</li>
<li><code>secondaryRootCauses</code>: Other possible causes</li>
<li><code>recommendedActions</code>: Prioritized actions</li>
<li><code>documentationLinks</code>: Relevant documentation</li>
<li><code>confidenceScore</code>: Overall confidence (0-100)</li>
</ul>
<p><strong>Status Codes:</strong></p>
<ul>
<li><code>200 OK</code>: Analysis completed successfully</li>
<li><code>400 Bad Request</code>: Invalid request</li>
<li><code>500 Internal Server Error</code>: Analysis failed</li>
</ul>
<h2 id="examples">Examples</h2>
<h3 id="example-1-rate-limit-error">Example 1: Rate Limit Error</h3>
<p><strong>Scenario:</strong> ElevenLabs TTS hits rate limit during generation.</p>
<p><strong>Root Cause:</strong> <code>RateLimit</code> (90% confidence)</p>
<p><strong>Recommendations:</strong></p>
<ol>
<li>Wait 5-10 minutes and retry</li>
<li>Enable request caching</li>
<li>Upgrade provider tier</li>
</ol>
<h3 id="example-2-missing-api-key">Example 2: Missing API Key</h3>
<p><strong>Scenario:</strong> Job fails at script generation stage with &quot;unauthorized&quot; error.</p>
<p><strong>Root Cause:</strong> <code>MissingApiKey</code> (98% confidence)</p>
<p><strong>Recommendations:</strong></p>
<ol>
<li>Add API key in Settings &gt; Providers</li>
<li>Verify key is valid</li>
<li>Test connection</li>
</ol>
<h3 id="example-3-ffmpeg-not-found">Example 3: FFmpeg Not Found</h3>
<p><strong>Scenario:</strong> Job fails at rendering stage with &quot;ffmpeg not found&quot; error.</p>
<p><strong>Root Cause:</strong> <code>FFmpegNotFound</code> (95% confidence)</p>
<p><strong>Recommendations:</strong></p>
<ol>
<li>Install FFmpeg from ffmpeg.org</li>
<li>Add FFmpeg to system PATH</li>
<li>Configure FFmpeg path in Settings</li>
</ol>
<h2 id="support">Support</h2>
<p>If you need help:</p>
<ol>
<li>Download diagnostic bundle</li>
<li>Run failure analysis</li>
<li>Check documentation links</li>
<li>Search community forums</li>
<li>Submit bundle to support with issue description</li>
</ol>
<p>For urgent issues, include:</p>
<ul>
<li>Job ID</li>
<li>Diagnostic bundle</li>
<li>Failure analysis output</li>
<li>Steps to reproduce</li>
</ul>
<h2 id="related-documentation">Related Documentation</h2>
<ul>
<li><a href="SSE_INTEGRATION_TESTING_GUIDE.md">SSE Integration Testing Guide</a></li>
<li><a href="COST_ANALYTICS_IMPLEMENTATION.md">Cost Analytics Implementation</a></li>
<li><a href="PRODUCTION_READINESS_CHECKLIST.md">Production Readiness Checklist</a></li>
<li><a href="OncallRunbook.html">Oncall Runbook</a></li>
</ul>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/Coffee285/aura-video-studio/blob/main/docs/operations/DIAGNOSTICS.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          Â© 2025 Aura Video Studio. Documentation built with DocFX.
        </div>
      </div>
    </footer>
  </body>
</html>

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Testing Documentation | Aura Video Studio </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Testing Documentation | Aura Video Studio ">
      
      
      <link rel="icon" href="../../favicon.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.html">
      <meta name="docfx:tocrel" content="../../toc.html">
      
      <meta name="docfx:rel" content="../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/Coffee285/aura-video-studio/blob/main/docs/testing/README.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../logo.svg" alt="Aura Video Studio">
            Aura Video Studio
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">

      <div class="content">
        <div class="actionbar">

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="testing-documentation">Testing Documentation</h1>

<p>Welcome to the Aura testing documentation. This directory contains comprehensive guides for writing, running, and maintaining tests across the project.</p>
<h2 id="quick-start">Quick Start</h2>
<pre><code class="lang-bash"># Backend tests
cd Aura.Tests
dotnet test --collect:&quot;XPlat Code Coverage&quot;

# Frontend tests
cd Aura.Web
npm run test:coverage

# All tests with coverage
./scripts/test/run-tests-with-coverage.sh
</code></pre>
<h2 id="documentation-index">Documentation Index</h2>
<h3 id="-essential-guides">ðŸ“˜ Essential Guides</h3>
<ol>
<li><p><strong><a href="TEST_WRITING_GUIDE.html">Test Writing Guide</a></strong> - Start here!</p>
<ul>
<li>Test structure and organization</li>
<li>Backend testing with xUnit and Moq</li>
<li>Frontend testing with Vitest and Testing Library</li>
<li>Using test data builders</li>
<li>Integration and performance tests</li>
<li>Best practices and examples</li>
</ul>
</li>
<li><p><strong><a href="MOCKING_GUIDE.html">Mocking Guide</a></strong> - Comprehensive mocking reference</p>
<ul>
<li>Backend mocking strategies (Moq)</li>
<li>Frontend mocking strategies (Jest, MSW)</li>
<li>API mocking patterns</li>
<li>Common patterns and anti-patterns</li>
</ul>
</li>
<li><p><strong><a href="E2E_TESTING_BEST_PRACTICES.html">E2E Testing Best Practices</a></strong> - Playwright guide</p>
<ul>
<li>Page Object Model</li>
<li>Selector strategies</li>
<li>Waiting and synchronization</li>
<li>Visual testing</li>
<li>Debugging E2E tests</li>
</ul>
</li>
<li><p><strong><a href="TEST_COVERAGE_STRATEGY.html">Test Coverage Strategy</a></strong> - Coverage goals and strategy</p>
<ul>
<li>Coverage targets (80% minimum)</li>
<li>Testing pyramid</li>
<li>Critical path coverage</li>
<li>Coverage enforcement</li>
<li>Monitoring and reporting</li>
</ul>
</li>
</ol>
<h2 id="test-infrastructure">Test Infrastructure</h2>
<h3 id="backend-net">Backend (.NET)</h3>
<pre><code>Aura.Tests/
â”œâ”€â”€ TestDataBuilders/          # Reusable test data builders
â”‚   â”œâ”€â”€ VideoJobBuilder.cs
â”‚   â”œâ”€â”€ ProjectBuilder.cs
â”‚   â”œâ”€â”€ TimelineBuilder.cs
â”‚   â”œâ”€â”€ AssetBuilder.cs
â”‚   â””â”€â”€ ApiKeyBuilder.cs
â”œâ”€â”€ Integration/               # Integration test suite
â”‚   â”œâ”€â”€ IntegrationTestBase.cs
â”‚   â”œâ”€â”€ ApiIntegrationTestBase.cs
â”‚   â””â”€â”€ EndpointTests/
â”œâ”€â”€ Performance/               # Performance tests
â”‚   â”œâ”€â”€ PerformanceTestBase.cs
â”‚   â””â”€â”€ VideoProcessingPerformanceTests.cs
â”œâ”€â”€ .runsettings              # Test configuration
â””â”€â”€ Aura.Tests.csproj         # Project with coverage settings
</code></pre>
<h3 id="frontend-react">Frontend (React)</h3>
<pre><code>Aura.Web/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ test/
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â”œâ”€â”€ testUtils.tsx        # Component test utilities
â”‚   â”‚   â”‚   â””â”€â”€ hookTestUtils.ts     # Hook test utilities
â”‚   â”‚   â”œâ”€â”€ setup.ts                 # Global test setup
â”‚   â”‚   â””â”€â”€ **/*.test.tsx            # Unit tests
â”‚   â””â”€â”€ **/__tests__/                # Colocated tests
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ e2e/                         # Playwright E2E tests
â”‚   â”œâ”€â”€ integration/                 # Integration tests
â”‚   â””â”€â”€ smoke/                       # Smoke tests
â”œâ”€â”€ vitest.config.coverage.ts        # Coverage configuration
â””â”€â”€ playwright.config.ts             # E2E configuration
</code></pre>
<h2 id="testing-tools">Testing Tools</h2>
<h3 id="backend-stack">Backend Stack</h3>
<ul>
<li><strong>xUnit</strong> - Test framework</li>
<li><strong>Moq</strong> - Mocking library</li>
<li><strong>FluentAssertions</strong> - Assertion library</li>
<li><strong>coverlet</strong> - Coverage collection</li>
<li><strong>ReportGenerator</strong> - Coverage reports</li>
</ul>
<h3 id="frontend-stack">Frontend Stack</h3>
<ul>
<li><strong>Vitest</strong> - Test runner</li>
<li><strong>Testing Library</strong> - Component testing</li>
<li><strong>Jest</strong> - Mocking and assertions</li>
<li><strong>Playwright</strong> - E2E testing</li>
<li><strong>MSW</strong> - API mocking</li>
</ul>
<h2 id="running-tests">Running Tests</h2>
<h3 id="unit-tests">Unit Tests</h3>
<pre><code class="lang-bash"># Backend
cd Aura.Tests
dotnet test

# Frontend
cd Aura.Web
npm test

# Watch mode (frontend)
npm run test:watch
</code></pre>
<h3 id="integration-tests">Integration Tests</h3>
<pre><code class="lang-bash"># Backend
dotnet test --filter &quot;FullyQualifiedName~Integration&quot;

# Frontend
npm run test:integration
</code></pre>
<h3 id="e2e-tests">E2E Tests</h3>
<pre><code class="lang-bash">cd Aura.Web
npm run playwright

# UI mode
npm run playwright:ui

# Headed mode
npm run playwright -- --headed
</code></pre>
<h3 id="coverage">Coverage</h3>
<pre><code class="lang-bash"># Backend with coverage
dotnet test --collect:&quot;XPlat Code Coverage&quot; --settings Aura.Tests/.runsettings

# Frontend with coverage
npm run test:coverage

# All tests with coverage
./scripts/test/run-tests-with-coverage.sh

# View coverage reports
open Aura.Tests/TestResults/coverage/index.html
open Aura.Web/coverage/index.html
</code></pre>
<h3 id="parallel-execution">Parallel Execution</h3>
<pre><code class="lang-bash"># Run all test suites in parallel
./scripts/test/parallel-test-runner.sh
</code></pre>
<h3 id="flaky-test-detection">Flaky Test Detection</h3>
<pre><code class="lang-bash"># Run tests multiple times to detect flakiness
./scripts/test/detect-flaky-tests.sh 10

# Results in flaky-test-results/summary.txt
</code></pre>
<h2 id="test-data-builders">Test Data Builders</h2>
<p>Use builders for consistent test data:</p>
<pre><code class="lang-csharp">// Backend
var job = new VideoJobBuilder()
    .WithProjectId(&quot;test-123&quot;)
    .InProgress(0.5)
    .Build();

var project = new ProjectBuilder()
    .WithName(&quot;Test Project&quot;)
    .WithTag(&quot;tutorial&quot;)
    .Build();

var timeline = new TimelineBuilder()
    .WithDuration(120.0)
    .WithDefaultVideoTrack()
    .Build();
</code></pre>
<pre><code class="lang-typescript">// Frontend
import { renderWithProviders } from '@/test/utils/testUtils';

renderWithProviders(&lt;MyComponent /&gt;, {
  withRouter: true,
  withQueryClient: true,
});
</code></pre>
<h2 id="coverage-targets">Coverage Targets</h2>
<table>
<thead>
<tr>
<th>Component</th>
<th>Target</th>
<th>Priority</th>
</tr>
</thead>
<tbody>
<tr>
<td>Core Services</td>
<td>90%</td>
<td>P0</td>
</tr>
<tr>
<td>API Controllers</td>
<td>85%</td>
<td>P0</td>
</tr>
<tr>
<td>Business Logic</td>
<td>90%</td>
<td>P0</td>
</tr>
<tr>
<td>UI Components</td>
<td>75%</td>
<td>P1</td>
</tr>
<tr>
<td>Utilities</td>
<td>95%</td>
<td>P1</td>
</tr>
<tr>
<td>Integration</td>
<td>80%</td>
<td>P1</td>
</tr>
</tbody>
</table>
<h2 id="cicd-integration">CI/CD Integration</h2>
<p>Tests run automatically on:</p>
<ul>
<li>Every commit (unit tests)</li>
<li>Every PR (full test suite)</li>
<li>Nightly (flaky test detection)</li>
</ul>
<h3 id="pr-checks">PR Checks</h3>
<ul>
<li>âœ… All tests pass</li>
<li>âœ… Coverage â‰¥ 80%</li>
<li>âœ… No flaky tests</li>
<li>âœ… Execution time &lt; 10 minutes</li>
</ul>
<h3 id="coverage-enforcement">Coverage Enforcement</h3>
<p>Tests must maintain 80% coverage:</p>
<pre><code class="lang-yaml"># CI will fail if coverage drops below threshold
- Backend: 80% line and branch coverage
- Frontend: 80% line, branch, function, statement coverage
</code></pre>
<h2 id="best-practices-summary">Best Practices Summary</h2>
<h3 id="general">General</h3>
<ol>
<li>âœ… Follow Arrange-Act-Assert pattern</li>
<li>âœ… Keep tests independent</li>
<li>âœ… Use descriptive test names</li>
<li>âœ… Test behavior, not implementation</li>
<li>âœ… Keep tests fast (&lt; 100ms for unit tests)</li>
</ol>
<h3 id="backend">Backend</h3>
<ol>
<li>âœ… Use test data builders</li>
<li>âœ… Mock external dependencies</li>
<li>âœ… Use FluentAssertions for readability</li>
<li>âœ… Verify mock calls</li>
<li>âœ… Test edge cases and errors</li>
</ol>
<h3 id="frontend">Frontend</h3>
<ol>
<li>âœ… Use testing utilities (<code>renderWithProviders</code>)</li>
<li>âœ… Test user interactions</li>
<li>âœ… Wait for async operations</li>
<li>âœ… Mock APIs with MSW</li>
<li>âœ… Test accessibility</li>
</ol>
<h3 id="e2e">E2E</h3>
<ol>
<li>âœ… Use Page Object Model</li>
<li>âœ… Use stable selectors (data-testid)</li>
<li>âœ… Avoid fixed waits</li>
<li>âœ… Test critical user journeys</li>
<li>âœ… Keep E2E tests minimal</li>
</ol>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="tests-failing-locally">Tests Failing Locally</h3>
<pre><code class="lang-bash"># Clean and rebuild
dotnet clean &amp;&amp; dotnet build
npm run clean &amp;&amp; npm install

# Clear test cache
rm -rf TestResults/ coverage/

# Run specific test
dotnet test --filter &quot;TestName&quot;
npm test -- ComponentName.test.tsx
</code></pre>
<h3 id="coverage-not-collecting">Coverage Not Collecting</h3>
<pre><code class="lang-bash"># Backend: Check .runsettings
cat Aura.Tests/.runsettings

# Frontend: Check vitest config
cat Aura.Web/vitest.config.coverage.ts

# Verify coverage tools installed
dotnet tool list -g | grep reportgenerator
</code></pre>
<h3 id="flaky-tests">Flaky Tests</h3>
<pre><code class="lang-bash"># Run flaky test detection
./scripts/test/detect-flaky-tests.sh 10

# Debug specific test
npm test -- --reporter=verbose ComponentName.test.tsx
</code></pre>
<h2 id="writing-your-first-test">Writing Your First Test</h2>
<h3 id="backend-example">Backend Example</h3>
<pre><code class="lang-csharp">using Aura.Tests.TestDataBuilders;
using FluentAssertions;
using Xunit;

public class MyServiceTests
{
    [Fact]
    public async Task ProcessVideo_WithValidInput_ReturnsSuccess()
    {
        // Arrange
        var job = new VideoJobBuilder().Build();
        var service = new MyService();

        // Act
        var result = await service.ProcessAsync(job);

        // Assert
        result.Should().BeTrue();
    }
}
</code></pre>
<h3 id="frontend-example">Frontend Example</h3>
<pre><code class="lang-typescript">import { renderWithProviders, screen, userEvent } from '@/test/utils/testUtils';
import { MyComponent } from './MyComponent';

describe('MyComponent', () =&gt; {
  it('should handle user interaction', async () =&gt; {
    // Arrange
    const user = userEvent.setup();
    renderWithProviders(&lt;MyComponent /&gt;);

    // Act
    await user.click(screen.getByRole('button'));

    // Assert
    expect(screen.getByText('Success')).toBeInTheDocument();
  });
});
</code></pre>
<h2 id="resources">Resources</h2>
<h3 id="internal">Internal</h3>
<ul>
<li><a href="TEST_WRITING_GUIDE.html">Test Writing Guide</a></li>
<li><a href="MOCKING_GUIDE.html">Mocking Guide</a></li>
<li><a href="E2E_TESTING_BEST_PRACTICES.html">E2E Best Practices</a></li>
<li><a href="TEST_COVERAGE_STRATEGY.html">Coverage Strategy</a></li>
</ul>
<h3 id="external">External</h3>
<ul>
<li><a href="https://xunit.net/">xUnit Documentation</a></li>
<li><a href="https://github.com/moq/moq4/wiki/Quickstart">Moq Quickstart</a></li>
<li><a href="https://fluentassertions.com/">FluentAssertions</a></li>
<li><a href="https://vitest.dev/guide/">Vitest Guide</a></li>
<li><a href="https://testing-library.com/">Testing Library</a></li>
<li><a href="https://playwright.dev/">Playwright Docs</a></li>
</ul>
<h2 id="getting-help">Getting Help</h2>
<ul>
<li>Check the <a href="TEST_WRITING_GUIDE.html">Test Writing Guide</a> first</li>
<li>Review existing tests for examples</li>
<li>Ask in the team chat</li>
<li>Create an issue if you find gaps in documentation</li>
</ul>
<h2 id="contributing">Contributing</h2>
<p>When adding new test infrastructure:</p>
<ol>
<li>Update relevant documentation</li>
<li>Add examples to test guides</li>
<li>Ensure tests are fast and reliable</li>
<li>Follow established patterns</li>
</ol>
<hr>
<p><strong>Need help?</strong> Start with the <a href="TEST_WRITING_GUIDE.html">Test Writing Guide</a> or check existing tests for examples.</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/Coffee285/aura-video-studio/blob/main/docs/testing/README.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          Â© 2025 Aura Video Studio. Documentation built with DocFX.
        </div>
      </div>
    </footer>
  </body>
</html>
